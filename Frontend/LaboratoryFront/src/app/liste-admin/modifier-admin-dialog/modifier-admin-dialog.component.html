<h2 mat-dialog-title class="text-xl font-semibold mb-4">Modifier Administrateur</h2>

<mat-dialog-content class="space-y-4">
  <form #utilisateurForm="ngForm" (ngSubmit)="onSubmit()" class="grid grid-cols-2 gap-4">
    <!-- Nom complet -->
    <mat-form-field appearance="outline" class="col-span-2">
      <mat-label>Nom Complet</mat-label>
      <input 
        matInput 
        name="nomComplet" 
        [(ngModel)]="utilisateur.nomComplet" 
        required 
        placeholder="Entrez le nom complet"
      >
      <mat-error *ngIf="utilisateurForm.controls['nomComplet']?.invalid">
        Le nom complet est requis
      </mat-error>
    </mat-form-field>

    <!-- Email -->
    <mat-form-field appearance="outline" class="col-span-2">
      <mat-label>Email</mat-label>
      <input 
        matInput 
        type="email" 
        name="email" 
        [(ngModel)]="utilisateur.email" 
        required 
        email 
        placeholder="Entrez l'email"
      >
      <mat-error *ngIf="utilisateurForm.controls['email']?.invalid">
        Veuillez entrer un email valide
      </mat-error>
    </mat-form-field>

    <!-- Profession -->
    <mat-form-field appearance="outline">
      <mat-label>Profession</mat-label>
      <input 
        matInput 
        name="profession" 
        [(ngModel)]="utilisateur.profession" 
        required 
        placeholder="Entrez la profession"
      >
      <mat-error *ngIf="utilisateurForm.controls['profession']?.invalid">
        La profession est requise
      </mat-error>
    </mat-form-field>

    <!-- Numéro de téléphone -->
    <mat-form-field appearance="outline">
      <mat-label>Numéro de Téléphone</mat-label>
      <input 
        matInput 
        name="numTel" 
        [(ngModel)]="utilisateur.numTel" 
        placeholder="Entrez le numéro de téléphone"
      >
    </mat-form-field>

    <!-- Rôle -->
    <mat-form-field appearance="outline">
      <mat-label>Rôle</mat-label>
      <mat-select 
        name="role" 
        [(ngModel)]="utilisateur.role" 
        required
      >
        <mat-option value="ADMIN">ADMIN</mat-option>
        <mat-option value="TECHNICIEN">Technicien</mat-option>
        <mat-option value="CLIENT">Client</mat-option>
      </mat-select>
      <mat-error *ngIf="utilisateurForm.controls['role']?.invalid">
        Le rôle est requis
      </mat-error>
    </mat-form-field>

    <!-- ID du Laboratoire -->
    <mat-form-field appearance="outline">
      <mat-label>ID du Laboratoire</mat-label>
      <input 
        matInput 
        type="number" 
        name="fkIdLaboratoire" 
        [(ngModel)]="utilisateur.fkIdLaboratoire" 
        placeholder="Entrez l'ID du laboratoire"
      >
    </mat-form-field>

    <!-- Signature -->
    <div class="col-span-2">
      <label class="block mb-2">Signature</label>
      <canvas 
        #signatureCanvas 
        width="700" 
        height="200" 
        class="border border-gray-300 rounded-md"
      ></canvas>
      <div class="flex space-x-2 mt-2">
        <button 
          mat-stroked-button 
          type="button" 
          color="primary" 
          (click)="clearPad()"
        >
          Effacer
        </button>
        <button 
          mat-stroked-button 
          type="button" 
          color="accent" 
          (click)="savePad()"
        >
          Enregistrer la signature
        </button>
      </div>
    </div>

    <!-- Mot de passe -->
    <mat-form-field appearance="outline" class="col-span-2">
      <mat-label>Mot de Passe</mat-label>
      <input 
        matInput 
        type="password" 
        name="password" 
        [(ngModel)]="utilisateur.password" 
        required 
        placeholder="Entrez le mot de passe"
      >
      <mat-error *ngIf="utilisateurForm.controls['password']?.invalid">
        Le mot de passe est requis
      </mat-error>
    </mat-form-field>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button 
    mat-button 
    (click)="onCancel()"
  >
    Annuler
  </button>
  <button 
    mat-raised-button 
    color="primary" 
    type="submit" 
    [disabled]="utilisateurForm.invalid"
    (click)="onSubmit()"
  >
    Modifier
  </button>
</mat-dialog-actions>